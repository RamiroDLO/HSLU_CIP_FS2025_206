---
title: "Auto & Commodity Data Collection & Analysis"
subtitle: "Analyzing the Relationship Between Used Car & Commodity Prices"
author: "Group 206 — Dongyuan Gao, Ramiro Diez-Liebana, Cyriel Van Helleputte"
date: "November 2025"
output:
  pdf_document:
    latex_engine: xelatex
    toc: true
    toc_depth: 3
    number_sections: true
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE, warning = FALSE, message = FALSE)
```



```{=latex}
\vspace{8pt}
```


# Project Overview

## The Storyline (Potential Business Problem)
The Swiss used car market is highly competitive. Our **fictional client** AutoHelvetia AG, a leading national **used car dealer**, faces the challenge of optimizing their pricing & purchasing strategy. In recent years, commodity prices are volatile and affects pricing of cars. So AutoHelvetia AG delegated the task to us: to understand the relationship between used car prices and commodity prices.

## Our Solution
This project delivers an **advanced data collection** and **anylsis** framework. Our goal is to collect valuable **market data** and uncover relationships between used car prices and key commodity markets. We develop a tool box using **web scraping of AutoScout24.ch** and integrating with **Yahoo Finance commodity data**, to provide AutoHelvetia AG data-driven insights for:

- **Optimize Pricing Strategies**
- **Gain Competitive Advantage**

## Key Findings Summary
- **Moderate commodity influence overall**: The composite commodity index surged post-2020 while used car prices stayed comparatively stable, yielding only moderate correlations that vary by brand and powertrain—highlighting the role of consumer behavior, policy, and supply chain dynamics.
- **Powertrain differences remain weak**: Petrol, diesel, and electric vehicles all show correlations below 0.20 with commodity prices, indicating that vehicle-specific characteristics dominate used car valuations and that commodity effects may surface more clearly in new vehicle markets.
- **Brand-specific sensitivities emerge**: Volvo and Porsche show battery metals positively, while Toyota and Cupra move inversely; copper is the most consistent positive correlate and oil often shows negative ties for ICE-focused brands.
- **Actionable recommendations**: Monitor copper and cobalt dips before sourcing electrified premium inventory, incorporate commodity indices as indicators for pricing (especially luxury/EV segments), and adjust inventory/pricing strategies—favor resilient brands in commodity bull runs, add surcharges for exposed mass-market models, and keep premium pricing steady.

# Feasibility Research

## Ethical Feasibility of Web Scraping AutoScout24.ch

This web scraping project was evaluated for both technical and legal feasibility. We focused on the academic research context and our analysis of AutoScout24.ch's robots.txt file and terms of service indicates that the project operates within acceptable boundaries for academic research purposes.
- **robots.txt Analysis**:
  - Allowed: General listing pages without filters
  - Restricted: User account pages (`/de/account/`, `/de/member/`)
  - Restricted: Filtered search results with specific URL parameters (e.g., `sort=`, `pricefrom=`)
  - Restricted: Administrative functions

### Technical Feasibility
- **Data Extraction**: Ethically extracts vehicle specifications, pricing, and listing details with Scraper and Yahoo Finance API, involving selenium and beautifulsoup.
- **Data Availability**: We found consistent and abundant data, which is appropriate for analysis for both used car listings and Commodity Data.

### Analytical Feasibility
- **Statistical Methods**: Appropriate statistical methods can be appllied for analysis, including correlation analysis, regression analysis, and time series analysis, etc.
- **Potential Conclusions**: The project can provide potential valuable insights into the relationship between used car prices and commodity prices, helping stakeholders make informed decisions.


# Data Sources & Collection

## Web Scraping Implementation

### Target Website
- **Primary Source**: AutoScout24.ch (https://www.autoscout24.ch).
- **Target Path**: `/de/autos/alle-marken` (All car listings).
- **Scope**: Used car listings across all makes and models available on the platform.

### Technical Implementation

#### Core Toolkits
- **Selenium WebDriver**: For browser automation and dynamic content loading.
- **BeautifulSoup4**: For HTML parsing and data extraction.
- **Custom Parser**: Combines multiple extraction methods(json, html, css, regex) for robustness.

#### Scraping Methodology
1. **Pagination Handling**:
   - Iterates through listing pages systematically and click on next page.
   - Implements smart navigation with randomized delays (5-15s between pages).

2. **Data Extraction Strategy**:
   - **Primary Method**: Structure-aware parsing using SVG icon titles and sibling elements.
   - **Combination of Methods**:
     - JSON structured data extraction.
     - CSS class-based element targeting.
     - Regular expression fallbacks for critical fields.

### Data Points Collected

| Data Field | Description | Example |
|------------|-------------|---------|
| `car_model` | Full vehicle make and model | "Volkswagen Golf 2.0 TDI" |
| `price_chf` | Listing price in CHF | 25,900 |
| `mileage` | Vehicle mileage in km | 85,200 |
| `engine_power_hp` | Engine power in HP | 150 |
| `power_mode` | Fuel/power type | Diesel, Petrol, Electric, Hybrid |
| `transmission` | Transmission type | Automat, Manuell, Halbautomatik |
| `production_date` | Production date | 2018 |
| `listing_url` | Direct URL to the listing | [Link] |


## Yahoo FinanceAPI Integration

We fed our commodity pipeline using the **yfinance Python library**. This library (over 20k stars in Github, (https://github.com/ranaroussi/yfinance)) gives access Yahoo Finance's public endpoints **without requiring API authentication**.It is not affiliated, to Yahoo, Inc. It's an **open-source tool that uses Yahoo's publicly available APIs**. 

### Technical Implementation

fetched historical **daily closing prices** for all tickers in the list from Yahoo Finance. If it doesn’t find closing price, it falls back to an adj close column. 

The core yfinance function used is `yf.download()`. It fetches historical daily closing prices for all tickers in the list from Yahoo Finance. If it doesn’t find closing price, it falls back to an adj close column. 

### Data Points Collected

| Data Field                | Description                                  | Example      |
|---------------------------|----------------------------------------------|--------------|
| `Date`                    | Trading day                                   |`2024-07-31`|
| `Month`                   | Month and year in `MM-YYYY` format             | `07-2024`|
| `WTI_Spot`                | Closing price of crude oil (`CL=F`)            | `81.32`  |
| `Copper_Spot`             | Closing price of COMEX copper futures (`HG=F`) | `4.32`   |
| `Lithium_Spot`            | Proxy for lithium prices (`LIT`)               | `57.89`  |
| `Aluminium_Spot`          | Closing price of LME aluminum futures (`ALI=F`)| `2235.00`|
| `Steel_Spot`              | Closing price of U.S. steel futures (`HRC=F`)  | `1015.00`|
| `Nickel_Spot`             | Global nickel prices –  (`NIC.AX`)             | `17345.00`|
| `Cobalt_Spot`             | Proxy for cobalt prices –  (`603799.SS`)       | `92.40`  |

- **Rate limits and handling**: While it does not have official request limits to call the tool, it still accesses Yahoo, and if the website implements changes or rate limits per IP or token that could be a problem with a more frequent use of the tool.

# Data Transformation and Cleaning

Across the project we apply a standard data-science cleaning cadence: validate dataframe, coerce types, handle missing values with data quality strategies, and normalize key features before exporting analysis-ready datasets.

### Autoscout Listing Standardization
*Script:* `Data/clean_data/Autoscout_Cleaner_Standardizer.py`

- **Brand & Model Extraction**: Uses regex-based patterns to parse the `car_model` field into `brand` and base `model` tokens, removing unwanted information (e.g., VW TIGUAN TSI 2.0 S VERSION BERN TOP ZUSTAND vs VW TIGUAN TSI 2.0 S).

- **Model Normalization**: Applies a replacement dictionary to outlier variants (e.g., “TESLA Model Y” → “Model Y”). Keeping consistent models during analysis.

- **Field Selection & Export**: Outputs a curated schema (`brand`, `model`, `car_model`, pricing, powertrain, and URL fields) to `Autoscout_Cleaned_Standardized.csv`, preserving only analytics-ready columns.

### Commodity Price Cleaning
*Script:* `Data/clean_data/load_data_cleaning.py`

- **Type Coercion**: Converts `Date` to datetime and commodity columns to numeric by replacing European decimal separators.

- **Missing Value Strategy**:
  - Reports gaps before/after processing for clarity.
  - Fills missing commodity prices with a 7-day rolling mean, then rounds to two decimals.

- **Temporal Date Standardization**: Generates a formatted `Date` string (`%d-%m-%Y`) for later joins and saves the cleaned series as `Data/Final Data/yahoo_spot_cleaned.csv`.

### Scraper Output Post-processing
*Script:* `Data/Scraping/Scraper.py`
- **Schema Consistency**: The scraper normalizes fuel types, transmission labels, and numeric fields (“N/A” fallbacks) to reduce later data cleaning steps.

- **Hybrid Extraction**: Combines JSON-LD fields with HTML parsing, ensuring critical attributes (`price_chf`, `mileage`, `production_date`, `listing_url`, etc.) are captured.

### Research Dataset Post-Processing
*Script:* `Analysis/RQ3/RQ3_Analysis.py`
- **Autoscout Cleaning & Missing Value Imputation**:

  - Converts `production_date` strings (including “Neues Fahrzeug”) to October 2025 and makes a `Month` period column.
  - Imputes continuous fields (`price_chf`, `mileage`, `engine_power_hp`) with rounded means.
  - Customized fill for `consumption_l_per_100km` (EV=0, then model mean, brand mean, global mean).
  - Categorical fills (`power_mode`, `transmission`) based on model majority vote, defaulting to “Unknown”.

- **Commodity Cleaning & Missing Value Imputation**:
  - Builds monthly periods, fills gaps from daily `Date` entries, and aggregates to one row per month.
  - Keeps `_Monthly_Avg` features and drops duplicates for consistent joins.

- **Merge Output**: Produces `Final_Merged_Data_RQ3.csv`, the **master clean dataset**.

# Analysis & Visualization

## Research Questions
In our feasibility study we set out three potential questions for the client:

1. **RQ1 — Commodity Index vs. Used Car Prices**: How do used car prices in Switzerland correlate with historical commodity price indices for key automotive materials (steel, aluminum, copper, crude oil)? We can construct a weighted composite commodity index and examine Pearson/Spearman correlations with median used car prices while controlling for vehicle age and mileage.
2. **RQ2 — Powertrain Sensitivity**: Do different vehicle power modes (petrol, diesel, electric, hybrid) exhibit distinct sensitivity to commodity price movements? We expect electric vehicles to react more to battery metals, while ICE vehicles respond to energy and structural metals.
3. **RQ3 — Brand-Level Differences**: How does the relationship between commodity prices and used car values vary across popular Swiss car brands? We segment by brand to detect whether luxury vs. volume manufacturers show different exposure to raw material cost pressures.


# Results and Findings

## RQ1 — Commodity Index vs. Used Car Prices

The index is rebased at **January 2020**, shortly before most commodities tanked 40 or 50% and resources so important like oil were traded at negative values (suppliers had to incentivize buyers with negative prices to clear out their reserves). 
Eventually things would rebound, making the index climb sharply, while both EV and combustion-engined median prices remained relatively flat during the length of the analysis. 

  \begin{center}
  \includegraphics[width=0.85\linewidth]{Analysis/RQ1/RQ1_timeseries.png}
  \end{center}

## RQ2 — Do different power modes exhibit different commodity price sensitivities?

This analysis examines whether different vehicle power modes (petrol, diesel, electric) exhibit varying sensitivities to commodity price movements in the used car market. We hypothesized that electric vehicles would show stronger correlations with battery-related materials (lithium, cobalt, nickel, copper), while conventional vehicles would be more sensitive to crude oil and steel prices.

Basic correlations between vehicle prices and commodity prices reveal some patterns, though all correlations remain weak (below 0.20)

   \begin{center}
   \includegraphics[width=0.60\linewidth]{Analysis/RQ2/correlation_heatmap_detailed.png}
   \end{center}

No statistical evidence supports differential commodity price sensitivity across vehicle power modes in this analysis.
Vehicle-specific characteristics (mileage, engine power, power mode itself) dominate price determination, while commodity prices show no significant explanatory power. This suggests that used car valuations are either insulated from commodity market fluctuations or that the relationship is more complex than captured by this basic analysis.

## RQ3 — Brand-Level Differences

1. **Main Finding — Brand-Specific Sensitivities Exist**: The correlation matrix shows clear variation across brands —Volvo and Porsche price correlate positively on battery metals, while brands like Toyota and Cupra price correlate negatively. These asymmetries confirm that commodity shocks affect brands unevenly in the Swiss used-car market.

   \begin{center}
   \includegraphics[width=0.60\linewidth]{Analysis/RQ3/outputs/correlation_matrix_heatmap.png}
   \end{center}

2. **Conclusion #1 — Luxury vs. Mass-Market Divergence**: Premium brands (Mercedes-Benz, BMW, Porsche) show mixed but generally weak correlations, suggesting their pricing power and brand equity may buffer them from direct commodity cost pass-through.
Mass-market European brands show slightly stronger positive ties to industrial metals, indicating more direct exposure to manufacturing cost pressures.

   \begin{center}
   \includegraphics[width=0.72\linewidth]{Analysis/RQ3/outputs/correlation_Nickel.png}
   \end{center}

3. **Conclusion #2 — Commodity-Specific Patterns**: Copper emerges as the most consistently positive correlate across European brands, reflecting its widespread use in electrical systems and wiring.
WTI (oil) shows negative correlations for several brands, possibly because higher fuel costs reduce demand for ICE vehicles, depressing their resale values.
Battery metals (Lithium, Cobalt, Nickel) show varied patterns—strongest for brands with significant EV/hybrid or high-end portfolios (Volvo, Porsche).

   \begin{center}
   \includegraphics[width=0.72\linewidth]{Analysis/RQ3/outputs/correlation_Copper.png}
   \end{center}



# Conclusion and Limitations
## Conclusion

This project aimed to analyze the relationship between used car prices and commodity markets in Switzerland. Through web scraping AutoScout24.ch and integrating Yahoo Finance commodity data, we uncovered interesting relationships into how raw material costs influence the Swiss used car market.

The results suggest **moderate correlation between commodity prices and the median price of used vehicles**, but the magnitude and direction vary substantially by brand and powertrain type. The composite commodity index peaked in 2021–2022 before normalizing, while used car prices remained relatively stable—suggesting that consumer behavior, policy incentives, and supply chain factors play equally important roles alongside raw material costs.


## Recommendations for our Client

For our fictional client, we have the following findings:

For RQ1, we recommend:
- **Timing Inventory Purchases**: Monitor battery metal prices (especially copper and cobalt) when acquiring electrified premium brands.
- **Pricing Models**: Incorporate commodity indices as leading indicators, particularly for luxury and EV segments.

For RQ2, we recommend:
- **investigating new vehicle markets rather than used vehicle markets may yield clearer insights, as production costs directly reflect current commodity prices while used vehicle valuations are heavily confounded by depreciation, market dynamics, and behavioral factors that obscure commodity price signals.

For RQ3's brand-commodity dynamics, we recommend:
1. **Strategic Inventory Allocation**:
   - Increase Volvo/Porsche acquisitions when battery metals dip (copper < $8k/ton, cobalt < $30k/ton)
   - Favor Toyota/Cupra stock during commodity bull markets as their pricing resists raw material inflation
2. **Brand-Specific Pricing Strategies**:
   - Build commodity surcharges into mass-market European (VW, Skoda) pricing models
   - Maintain premium pricing stability for luxury brands (BMW, Mercedes) regardless of material cost swings

## Limitations

- **Temporal Scope**: Analysis covers 2020–2025, a period marked by extraordinary events (pandemic, supply chain disruptions) that may not represent typical market conditions.
- **Causality**: Correlations do not establish causal relationships; confounding factors like consumer preferences and policy changes were not fully controlled.
- **Geographic Scope**: Limited to the Swiss market, which may exhibit unique characteristics not generalizable to other regions.
- **Data Quality**: Web-scraped data subject to listing inconsistencies and potential sampling bias toward certain brands or price ranges. API Connection to market-ready sources such as CME’s API, Shanghai Metals, or Bloomberg Terminal would be ideal.
